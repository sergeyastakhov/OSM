<?xml version="1.0" encoding="UTF-8"?>
<tag-rules>
  <area id="national-boundary" cache-file="national-boundary.idx">
    <match>
      <tag k="boundary" v="administrative"/>
      <tag k="admin_level" v="1"/>
    </match>
  </area>
  <area id="boundary-administrative">
    <match>
      <tag k="boundary" v="administrative"/>
    </match>
  </area>
  <area id="place">
    <match>
      <tag k="place" v="city|town|village|hamlet|isolated_dwelling|allotments"/>
    </match>
  </area>
  <relation id="route-road">
    <match>
      <tag k="route" v="road"/>
    </match>
  </relation>

  <transform>
    <name>Urban speeds</name>
    <match type="way">
      <tag k="highway"/>
      <inside area="national-boundary"/>
      <inside area="place"/>
    </match>
    <output>
      <copy-all/>
      <add-tag k="maxspeed" v="${ISO3166-1}:urban" context="national-boundary"/>
    </output>
  </transform>

  <transform>
    <name>Rural speeds</name>
    <match type="way">
      <tag k="highway"/>
      <inside area="national-boundary"/>
      <outside area="place"/>
    </match>
    <output>
      <copy-all/>
      <add-tag k="maxspeed" v="${ISO3166-1}:rural" context="national-boundary"/>
    </output>
  </transform>

  <transform>
    <name>Administrative units</name>
    <match type="way">
      <tag k="highway"/>
      <inside area="boundary-administrative"/>
    </match>
    <output>
      <copy-all/>
      <add-tag k="administrative:${admin_level}" v="${name}" context="boundary-administrative"/>
    </output>
  </transform>

</tag-rules>